<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Prank Mode ðŸ˜ˆ</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; width:100%; overflow:hidden; background:#000; font-family:Arial, sans-serif; }
    #initialScreen { position:fixed; inset:0; background:linear-gradient(135deg, #0f0c29, #302b63, #24243e); color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; height:100vh; width:100vw; }
    h1 { font-size: clamp(2.5rem, 12vw, 5rem); color:#ff0000; text-shadow:0 0 50px #ff0000; margin-bottom:3rem; text-align:center; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.1); } }
    input { width:85%; max-width:500px; padding:25px 40px; font-size: clamp(1.5rem, 8vw, 2.2rem); margin:25px 0; border:none; border-radius:25px; background:rgba(255,255,255,0.1); color:white; text-align:center; outline:none; box-shadow:0 0 50px rgba(255,0,0,0.7); }
    input::placeholder { color:#aaa; }
    #videoScreen, #imageScreen { position:fixed; inset:0; background:#000; display:none; z-index:5; height:100vh; width:100vw; overflow:hidden; cursor:pointer; }
    video, img { width:100%; height:100%; object-fit:cover; object-position:center; }
  </style>
</head>
<body>
  <div id="initialScreen">
    <h1>Apna Naam Likh Do... ðŸ˜±</h1>
    <input type="text" id="name" placeholder="Enter Your Name" autocomplete="off" autofocus>
    <input type="date" id="dob" placeholder="Enter Your Dob">
  </div>

  <div id="videoScreen">
    <video id="prankVideo" autoplay playsinline muted>
      <source id="videoSrc" src="" type="video/mp4">
      Video nahi chal raha...
    </video>
  </div>

  <div id="imageScreen">
    <img id="prankImage" src="" alt="Scary Image">
  </div>

  <audio id="bgSound" loop>
    <source src="" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    const nameInput   = document.getElementById('name');
    const initialScreen = document.getElementById('initialScreen');
    const videoScreen   = document.getElementById('videoScreen');
    const imageScreen   = document.getElementById('imageScreen');
    const video         = document.getElementById('prankVideo');
    const videoSrc      = document.getElementById('videoSrc');
    const image         = document.getElementById('prankImage');
    const audio         = document.getElementById('bgSound');
    const audioSrc      = audio.querySelector('source');

    const USERNAME = "copai093-ops";
    const REPO     = "Users";
    const BRANCH   = "main";

    const VIDEO_FILE = "3.mp4";
    const IMAGE_FILE = "img.jpeg";
    const SOUND_FILE = "ring.mp3";

    const videoURL = `https://raw.githack.com/${USERNAME}/${REPO}/${BRANCH}/${VIDEO_FILE}`;
    const imageURL = `https://raw.githack.com/${USERNAME}/${REPO}/${BRANCH}/${IMAGE_FILE}`;
    const soundURL = `https://raw.githack.com/${USERNAME}/${REPO}/${BRANCH}/${SOUND_FILE}`;

    let vibrateInterval = null;

    function startVibration() {
      if ("vibrate" in navigator) {
        const pattern = [400, 150, 600, 200];
        vibratePhone(pattern);
        vibrateInterval = setInterval(() => vibratePhone(pattern), 2000);
      }
    }

    function vibratePhone(pattern) {
      navigator.vibrate(pattern);
    }

    function stopVibration() {
      if (vibrateInterval) {
        clearInterval(vibrateInterval);
        vibrateInterval = null;
      }
      navigator.vibrate(0);
    }

    function enterFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) elem.requestFullscreen().catch(()=>{});
      else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
      else if (elem.mozRequestFullScreen) elem.mozRequestFullScreen();
      else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
    }

    function unmuteVideo() {
      video.muted = false;
      video.volume = 1.0;
    }

    function startPrankSequence() {
      initialScreen.style.display = 'none';

      videoScreen.style.display = 'block';
      videoSrc.src = videoURL;
      video.load();
      video.muted = true;
      video.play().catch(()=>{});

      startVibration();           // vibration sirf yahan se start
      enterFullscreen();

      setTimeout(() => {
        video.pause();
        videoScreen.style.display = 'none';
        stopVibration();          // video khatam â†’ vibration band

        imageScreen.style.display = 'block';
        image.src = imageURL;

        audioSrc.src = soundURL;
        audio.load();
        audio.play().catch(e => console.log("Autoplay blocked", e));

        setTimeout(() => {
          imageScreen.style.display = 'none';
        }, 15000);

      }, 6000);
    }

    // Trigger on Enter (sabse reliable sound + fullscreen ke liye)
    nameInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        if (nameInput.value.trim().length >= 3) {
          startPrankSequence();
          setTimeout(unmuteVideo, 400);
        }
      }
    });

    // Typing se bhi trigger (optional, agar Enter na dabaye to)
    nameInput.addEventListener('input', () => {
      if (nameInput.value.trim().length >= 3) {
        startPrankSequence();
      }
    });

    // Extra: sirf video screen pe click karne se strong vibrate + unmute (input pe nahi chalega)
    videoScreen.addEventListener('click', () => {
      enterFullscreen();
      unmuteVideo();
      audio.play().catch(()=>{});
      navigator.vibrate?.([800]);   // strong single vibrate on video tap
    });

    // Error handling
    video.onerror = () => {
      document.body.innerHTML = `<div style="color:white;text-align:center;margin-top:40vh;font-size:2rem;">
        Video load fail ðŸ˜¢ (3.mp4 check karo repo mein)
      </div>`;
      stopVibration();
    };

    image.onerror = () => console.log("Image failed to load");
    audio.onerror = () => console.log("MP3 failed to load â€“ check ring.mp3");

    window.addEventListener('beforeunload', stopVibration);
  </script>
</body>
</html>
